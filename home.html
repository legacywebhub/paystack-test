<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="bootstrap.min.css">
    <title>Document</title>
    <script>
      var publicKey = "pk_test_832c31b00dacb05ee5a7bb8c43786e381eb45921";
    </script>
    <style>
        body {
            /* font-family: Verdana, Geneva, Tahoma, sans-serif; */
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        label {
            display: block;
        }
        button, input {
          width: 100%;
        }
    </style>
</head>
<body>
    <div style="margin-top: 30px; padding: 10px 0;">
    <h3>Pay with paystack</h3>
    <form id="paymentForm">
      <div class="form-group">
        <label for="name">Full name</label>
        <input type="text" id="name"/>
      </div>
        <div class="form-group">
          <label for="email">Email Address</label>
          <input type="email" id="email" required />
        </div>
        <div class="form-group">
          <label for="amount">Amount</label>
          <input type="number" id="amount" required />
        </div>
        <div class="form-submit">
          <button type="submit" class="btn btn-primary" id="pay"> Pay </button>
        </div>
    </form>
    </div>
       
    <script src="https://js.paystack.co/v2/inline.js"></script>
      <script>
        var paymentForm = document.getElementById('paymentForm').addEventListener('submit', payWithPaystack);
        var formEmail = document.getElementById('email').value
        var formAmount = document.getElementById('amount').value

        
        function payWithPaystack() {

          const paystack = new PaystackPop();

          paystack.newTransaction({
            key: publicKey, // Replace with your public key

            email: formEmail,

            amount: formAmount + "00", // the amount value is multiplied by 100 to convert to the lowest currency unit

            currency: 'NGN', // Use GHS for Ghana Cedis or USD for US Dollars

            ref: Math.floor(Math.random() * 1000000000 + 1), // Replace with a reference you generated

            onSuccess: (transaction) => { 
              // Payment complete! Reference: transaction.reference 
              alert('Payment successful');
              var reference = transaction.reference;
              alert('Payment complete! Reference: ' + reference);
              // Make an AJAX call to your server with the reference to verify the transaction
            },

            onCancel: () => {
              // user closed popup
              alert('Transaction was not completed, window closed.');
            }
          });
        }
      </script>
</body>
</html>